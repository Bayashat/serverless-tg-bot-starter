[ üá¨üáß English ](README.md) | [ üá∞üáø “ö–∞–∑–∞“õ—à–∞ ](docs/README_KK.md) | [ üá∑üá∫ –†—É—Å—Å–∫–∏–π ](docs/README_RU.md)


# üöÄ Serverless Telegram Bot Starter

[![Python 3.13+](https://img.shields.io/badge/python-3.13+-blue.svg)](https://www.python.org/)
[![AWS CDK](https://img.shields.io/badge/AWS_CDK-v2-orange.svg)](https://docs.aws.amazon.com/cdk/)
[![Dependency Manager](https://img.shields.io/badge/uv-managed-purple)](https://github.com/astral-sh/uv)
[![Code Style](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
![License](https://img.shields.io/badge/license-MIT-green.svg)

–ì–æ—Ç–æ–≤—ã–π –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —à–∞–±–ª–æ–Ω –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è Telegram –±–æ—Ç–æ–≤ –Ω–∞ AWS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Serverless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ AWS CDK (Python), —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö VPS –Ω–∞ Cloud Native.

## –ü–æ—á–µ–º—É –≠—Ç–æ—Ç –®–∞–±–ª–æ–Ω?

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –ü—Ä–∞–≤–∏–ª–∞ –ò–≥—Ä—ã –ú–µ–Ω—è—é—Ç—Å—è

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö Lambda-—Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç, —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é, —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**:

```
Telegram ‚Üí API Gateway ‚Üí Receiver Lambda ‚Üí SQS Queue ‚Üí Worker Lambda ‚Üí DynamoDB + Telegram API
```

**–ö–ª—é—á–µ–≤—ã–µ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ **–ë–µ–∑ –¢–∞–π–º–∞—É—Ç–æ–≤**: Worker Lambda –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∏–∫–æ–≤—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (—Ç—ã—Å—è—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).
- ‚úÖ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: Dead Letter Queue (DLQ) –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–±–æ–π–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å**: –ü–ª–∞—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∑–∞ —Ç–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, **–ë–ï–°–ü–õ–ê–¢–ù–û** –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –±–æ—Ç–æ–≤).

### –•–≤–∞—Ç–∏—Ç –ü–ª–∞—Ç–∏—Ç—å –∑–∞ –ü—Ä–æ—Å—Ç–∞–∏–≤–∞—é—â–∏–π VPS!

–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π VPS —Å—Ç–æ–∏—Ç $5-10/–º–µ—Å—è—Ü –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞. –° Serverless –≤—ã –ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∑–∞ –∑–∞–ø—Ä–æ—Å—ã. –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤ **–≤–∞—à —Å—á–µ—Ç AWS —Å–æ—Å—Ç–∞–≤–∏—Ç $0.00** –±–ª–∞–≥–æ–¥–∞—Ä—è AWS Free Tier.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

![Serverless Bot Architecture](../assets/architecture.png)

## –û—Ü–µ–Ω–∫–∞ –°—Ç–æ–∏–º–æ—Å—Ç–∏

### –î–æ—Ä–æ–≥–æ –ª–∏ —ç—Ç–æ? –ù–µ—Ç. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ë–ï–°–ü–õ–ê–¢–ù–û.

| –†–µ—Å—É—Ä—Å | –õ–∏–º–∏—Ç Free Tier (–ï–∂–µ–º–µ—Å—è—á–Ω–æ) | –ü—Ä–∏–º–µ—Ä–Ω–∞—è –ï–º–∫–æ—Å—Ç—å –ë–æ—Ç–∞ |
|--------|------------------------------|------------------------|
| AWS Lambda | 400,000 –ì–ë-—Å–µ–∫—É–Ω–¥ | ~3,000,000 —Å–æ–æ–±—â–µ–Ω–∏–π |
| API Gateway | 300 –º–ª–Ω –∑–∞–ø—Ä–æ—Å–æ–≤ (1-–π –≥–æ–¥) | –ë–µ–∑–ª–∏–º–∏—Ç–Ω–æ –¥–ª—è –±–æ—Ç–æ–≤ |
| DynamoDB | 25 –ì–ë –•—Ä–∞–Ω–∏–ª–∏—â–∞ | –ú–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø–∏—Å–µ–π |
| SQS | 1 –ú–∏–ª–ª–∏–æ–Ω –ó–∞–ø—Ä–æ—Å–æ–≤ | ~500,000 —Å–æ–æ–±—â–µ–Ω–∏–π |

**–í–µ—Ä–¥–∏–∫—Ç:** –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤ –≤–∞—à —Å—á–µ—Ç AWS –±—É–¥–µ—Ç **$0.00**.

## üõ†Ô∏è –°—É–ø–µ—Ä –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (Prerequisites)

- **[AWS CLI](https://aws.amazon.com/cli/)**, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å –≤–∞—à–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º.
- **[Docker](https://www.docker.com/)** (–Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Å–±–æ—Ä–∫–∏ CDK).
- **[uv](https://github.com/astral-sh/uv)** (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python).

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ü—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone [https://github.com/Bayashat/serverless-tg-bot-starter.git](https://github.com/Bayashat/serverless-tg-bot-starter.git)
cd serverless-tg-bot-starter

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
uv sync
```
### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –û–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å .env –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã
echo "TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω" > .env
echo "TELEGRAM_WEBHOOK_SECRET_TOKEN=$(openssl rand -hex 32)" >> .env
```

### 3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å(–õ–æ–∫–∞–ª—å–Ω–æ–µ)

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
cd infra

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ CDK (–Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)
uv run cdk bootstrap

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ —Å—Ä–µ–¥—É Dev
uv run cdk deploy -c env=dev
```

### 4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Webhook
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ WebhookApiUrl –∏–∑ –≤—ã–≤–æ–¥–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –µ–≥–æ:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_API_URL –Ω–∞ —Å—Å—ã–ª–∫—É –∏–∑ –≤—ã–≤–æ–¥–∞
curl -X POST "[https://api.telegram.org/bot](https://api.telegram.org/bot)<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "YOUR_API_URL/webhook", "secret_token": "YOUR_SECRET_TOKEN"}'
```

## üë®‚Äçüíª –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –†–∞–±–æ—á–∏–π –ü—Ä–æ—Ü–µ—Å—Å

–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —à–∞–±–ª–æ–Ω, —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è —Å—Ä–µ–¥–∞.

### –ö–∞—á–µ—Å—Ç–≤–æ –ö–æ–¥–∞ (Pre-commit)

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º pre-commit –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (Black, Flake8).

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å git hooks
uv run pre-commit install

# (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
uv run pre-commit run --all-files
```

### CI/CD –ü–∞–π–ø–ª–∞–π–Ω (GitHub Actions)

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω (.github/workflows/deploy.yml), –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ø–ª–æ–∏—Ç –≤ dev –ø—Ä–∏ –ø—É—à–µ –∏ –≤ prod –ø—Ä–∏ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ.


### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ö–ª—é—á–∏ –î–æ—Å—Ç—É–ø–∞ –ù–µ –ù—É–∂–Ω—ã!

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º AWS OIDC (OpenID Connect) –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –¥–µ–ø–ª–æ–µ–≤ –±–µ–∑ –ø–∞—Ä–æ–ª–µ–π.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x scripts/setup_oidc.sh

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./scripts/setup_oidc.sh <github_user>/<repo_name>
./scripts/setup_oidc.sh yourname/serverless-tg-bot-starter
```

**–î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub**: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `AWS_ROLE_ARN` –∏–∑ –≤—ã–≤–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Å–µ–∫—Ä–µ—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤–º–µ—Å—Ç–µ —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –±–æ—Ç–∞.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ **[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞](docs/developer_guide.md)**: –ö–∞–∫ –ø–∏—Å–∞—Ç—å —Ö–µ–Ω–¥–ª–µ—Ä—ã, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Context –∏ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏—á–∏.
- üöÄ **[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –î–µ–ø–ª–æ—é](docs/deployment.md)**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD, OIDC –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.

## ü§ù –í–∫–ª–∞–¥ –≤ –ü—Ä–æ–µ–∫—Ç

–í–∫–ª–∞–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ pre-commit –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π Pull Request.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω –¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤!

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏–∑ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏, –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö –Ω–∞ Serverless**
