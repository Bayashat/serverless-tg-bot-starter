[ üá¨üáß English ](README.md) | [ üá∞üáø “ö–∞–∑–∞“õ—à–∞ ](docs/README_KK.md) | [ üá∑üá∫ –†—É—Å—Å–∫–∏–π ](docs/README_RU.md)


# üöÄ Serverless Telegram Bot Starter

[![Python 3.13+](https://img.shields.io/badge/python-3.13+-blue.svg)](https://www.python.org/)
[![AWS CDK](https://img.shields.io/badge/AWS_CDK-v2-orange.svg)](https://docs.aws.amazon.com/cdk/)
[![Dependency Manager](https://img.shields.io/badge/uv-managed-purple)](https://github.com/astral-sh/uv)
[![Code Style](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
![License](https://img.shields.io/badge/license-MIT-green.svg)

AWS Serverless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Å—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω–∞ –æ—Ç—ã—Ä—ã–ø Telegram –±–æ—Ç—Ç–∞—Ä—ã–Ω –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –¥–∞–π—ã–Ω —à–∞–±–ª–æ–Ω. AWS CDK (Python) –Ω–µ–≥—ñ–∑—ñ–Ω–¥–µ “õ“±—Ä—ã–ª“ì–∞–Ω, –¥”ô—Å—Ç“Ø—Ä–ª—ñ VPS-—Ç–µ–Ω Cloud Native-–≥–µ –∫”©—à—ñ–ø –∂–∞—Ç“õ–∞–Ω ”ô–∑—ñ—Ä–ª–µ—É—à—ñ–ª–µ—Ä–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω.

## –ù–µ–≥–µ –ë“±–ª –®–∞–±–ª–æ–Ω?

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–¥—ã“õ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –û–π—ã–Ω –ï—Ä–µ–∂–µ—Å—ñ–Ω ”®–∑–≥–µ—Ä—Ç—É—à—ñ

15 –º–∏–Ω—É—Ç—Ç–∞–Ω –∫–µ–π—ñ–Ω “Ø–∑—ñ–ª—ñ–ø –∫–µ—Ç–µ—Ç—ñ–Ω (timeout) –¥”ô—Å—Ç“Ø—Ä–ª—ñ —Å–∏–Ω—Ö—Ä–æ–Ω–¥—ã Lambda —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã–Ω–∞ “õ–∞—Ä–∞“ì–∞–Ω–¥–∞, –±“±–ª —à–∞–±–ª–æ–Ω **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–¥—ã, –æ“õ–∏“ì–∞“ì–∞ –Ω–µ–≥—ñ–∑–¥–µ–ª–≥–µ–Ω (event-driven) –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–Ω—ã** “õ–æ–ª–¥–∞–Ω–∞–¥—ã:
```
Telegram ‚Üí API Gateway ‚Üí Receiver Lambda ‚Üí SQS Queue ‚Üí Worker Lambda ‚Üí DynamoDB + Telegram API
```

**–ù–µ–≥—ñ–∑–≥—ñ –ê—Ä—Ç—ã“õ—à—ã–ª—ã“õ—Ç–∞—Ä:**

- ‚úÖ **Timeout –ñ–æ“õ**: Worker Lambda —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–¥—ã ”©“£–¥–µ–π–¥—ñ.
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±—Ç–∞–ª–∞—Ç—ã–Ω**: –¢—Ä–∞—Ñ–∏–∫—Ç—ñ“£ –∫“Ø—Ä—Ç ”©—Å—É—ñ–Ω (–º—ã“£–¥–∞“ì–∞–Ω “õ–æ–ª–¥–∞–Ω—É—à—ã) –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Ç“Ø—Ä–¥–µ –∫”©—Ç–µ—Ä–µ–¥—ñ.
- ‚úÖ **–°–µ–Ω—ñ–º–¥—ñ**: Dead Letter Queue (DLQ) “õ–∞—Ç–µ —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã “±—Å—Ç–∞–ø “õ–∞–ª–∞–¥—ã.
- ‚úÖ **“Æ–Ω–µ–º–¥—ñ**: –¢–µ–∫ “õ–æ–ª–¥–∞–Ω“ì–∞–Ω—ã“£—ã–∑ “Ø—à—ñ–Ω —Ç”©–ª–µ–π—Å—ñ–∑ (–∫”©–ø—Ç–µ–≥–µ–Ω –±–æ—Ç—Ç–∞—Ä “Ø—à—ñ–Ω **–¢–ï–ì–Ü–ù**).

### –ë–æ—Å –¢“±—Ä“ì–∞–Ω VPS “Æ—à—ñ–Ω –¢”©–ª–µ—É–¥—ñ –î–æ“ì–∞—Ä—ã“£—ã–∑!

–î”ô—Å—Ç“Ø—Ä–ª—ñ VPS —Ç—Ä–∞—Ñ–∏–∫–∫–µ “õ–∞—Ä–∞–º–∞—Å—Ç–∞–Ω –∞–π—ã–Ω–∞ $5-10 —Ç“±—Ä–∞–¥—ã. Serverless –∞—Ä“õ—ã–ª—ã —Å—ñ–∑ ”ô—Ä —Å“±—Ä–∞–Ω—ã—Å (request) “Ø—à—ñ–Ω —Ç”©–ª–µ–π—Å—ñ–∑. –ü–µ—Ç-–∂–æ–±–∞–ª–∞—Ä –º–µ–Ω —Å—Ç–∞—Ä—Ç–∞–ø—Ç–∞—Ä–¥—ã“£ –∫”©–±—ñ “Ø—à—ñ–Ω **AWS —à–æ—Ç—ã“£—ã–∑ $0.00 –±–æ–ª–∞–¥—ã** (Free Tier –∞—Ä“õ–∞—Å—ã–Ω–¥–∞).

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

![Serverless Bot Architecture](../assets/architecture.png)

## “ö“±–Ω—ã–Ω –ë–∞“ì–∞–ª–∞—É (Cost Estimation)

### –ë“±–ª “õ—ã–º–±–∞—Ç –ø–∞? –ñ–æ“õ. –°—ñ—Ä”ô, –¢–ï–ì–Ü–ù.

| –†–µ—Å—É—Ä—Å | Free Tier –õ–∏–º–∏—Ç—ñ (–ê–π—ã–Ω–∞) | –ë–æ—Ç—Ç—ã“£ –®–∞–º–∞–º–µ–Ω –ê–ª“ì–∞–Ω–¥–∞“ì—ã –°—ã–π—ã–º–¥—ã–ª—ã“ì—ã |
|--------|--------------------------|---------------------------------------|
| AWS Lambda | 400,000 –ì–ë-—Å–µ–∫—É–Ω–¥ | ~3,000,000 —Ö–∞–±–∞—Ä–ª–∞–º–∞ |
| API Gateway | 300 –º–ª–Ω —Å“±—Ä–∞–Ω—ã—Å (1-—à—ñ –∂—ã–ª) | –ë–æ—Ç—Ç–∞—Ä “Ø—à—ñ–Ω —à–µ–∫—Ç–µ—É—Å—ñ–∑ |
| DynamoDB | 25 –ì–ë –°–∞“õ—Ç–∞—É –æ—Ä–Ω—ã | –ú–∏–ª–ª–∏–æ–Ω–¥–∞“ì–∞–Ω –∂–∞–∑–±–∞–ª–∞—Ä |
| SQS | 1 –ú–∏–ª–ª–∏–æ–Ω –°“±—Ä–∞–Ω—ã—Å | ~500,000 —Ö–∞–±–∞—Ä–ª–∞–º–∞ |

**“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã:** –ö”©–ø—Ç–µ–≥–µ–Ω —Å—Ç–∞—Ä—Ç–∞–ø—Ç–∞—Ä “Ø—à—ñ–Ω AWS —à–æ—Ç—ã“£—ã–∑ **$0.00** –±–æ–ª–∞–¥—ã.

## üõ†Ô∏è –°—É–ø–µ—Ä –ñ—ã–ª–¥–∞–º –ë–∞—Å—Ç–∞—É

### –ê–ª“ì—ã—à–∞—Ä—Ç—Ç–∞—Ä (Prerequisites)

- **[AWS CLI](https://aws.amazon.com/cli/)** –æ—Ä–Ω–∞—Ç—ã–ª“ì–∞–Ω –∂”ô–Ω–µ –±–∞–ø—Ç–∞–ª“ì–∞–Ω.
- **[Docker](https://www.docker.com/)** “õ–æ—Å—ã–ª“ì–∞–Ω (CDK –∂–∏–Ω–∞—É “Ø—à—ñ–Ω “õ–∞–∂–µ—Ç).
- **[uv](https://github.com/astral-sh/uv)** –æ—Ä–Ω–∞—Ç—ã–ª“ì–∞–Ω (Python –ø–∞–∫–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä—ñ).

### 1. –ñ–æ–±–∞–Ω—ã –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è–ª–∞—É

```bash
# –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π–¥—ñ –∫–ª–æ–Ω–¥–∞—É
git clone [https://github.com/Bayashat/serverless-tg-bot-starter.git](https://github.com/Bayashat/serverless-tg-bot-starter.git)
cd serverless-tg-bot-starter

# –¢”ô—É–µ–ª–¥—ñ–ª—ñ–∫—Ç–µ—Ä–¥—ñ (dependencies) –æ—Ä–Ω–∞—Ç—É
uv sync
```

### 2. –û—Ä—Ç–∞–Ω—ã –ë–∞–ø—Ç–∞—É (.env)
```bash
# .env —Ñ–∞–π–ª—ã–Ω –∂–∞—Å–∞—É –∂”ô–Ω–µ —Ç–æ–∫–µ–Ω–¥–µ—Ä–¥—ñ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—É
echo "TELEGRAM_BOT_TOKEN=—Å—ñ–∑–¥—ñ“£_—Ç–æ–∫–µ–Ω" > .env
echo "TELEGRAM_WEBHOOK_SECRET_TOKEN=$(openssl rand -hex 32)" >> .env
```

### 3. –û—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É (Local Dev)
```bash
# –ò–Ω—Ñ—Ä–∞“õ“±—Ä—ã–ª—ã–º –ø–∞–ø–∫–∞—Å—ã–Ω–∞ ”©—Ç—É
cd infra

# CDK –¥–∞–π—ã–Ω–¥–∞—É (–∞–∫–∫–∞—É–Ω—Ç“õ–∞ –±—ñ—Ä —Ä–µ—Ç “õ–∞–Ω–∞ “õ–∞–∂–µ—Ç)
uv run cdk bootstrap

# Dev –æ—Ä—Ç–∞—Å—ã–Ω–∞ –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É (Deploy)
uv run cdk deploy -c env=dev
```

### 4. Webhook –±–∞–ø—Ç–∞—É (—à—ã“ì–∞—Ä—É–¥–∞–Ω API URL –ø–∞–π–¥–∞–ª–∞–Ω—ã“£—ã–∑)

–¢–µ—Ä–º–∏–Ω–∞–ª–¥–∞–Ω WebhookApiUrl –∫”©—à—ñ—Ä—ñ–ø –∞–ª—ã“£—ã–∑ –∂”ô–Ω–µ –æ–Ω—ã —Ç—ñ—Ä–∫–µ“£—ñ–∑:

```bash
# YOUR_API_URL –æ—Ä–Ω—ã–Ω–∞ —à—ã“õ“õ–∞–Ω —Å—ñ–ª—Ç–µ–º–µ–Ω—ñ “õ–æ–π—ã“£—ã–∑
curl -X POST "[https://api.telegram.org/bot](https://api.telegram.org/bot)<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "YOUR_API_URL/webhook", "secret_token": "YOUR_SECRET_TOKEN"}'
```

–î–∞–π—ã–Ω! –ë–æ—Ç—ã“£—ã–∑ –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ. üéâ


## üë®‚Äçüíª –ö”ô—Å—ñ–±–∏ –ñ“±–º—ã—Å –ü—Ä–æ—Ü–µ—Å—ñ

–ë“±–ª –∂–∞–π “ì–∞–Ω–∞ —à–∞–±–ª–æ–Ω –µ–º–µ—Å, –±“±–ª —Ç–æ–ª—ã“õ“õ–∞–Ω–¥—ã –∏–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ –æ—Ä—Ç–∞.

### –ö–æ–¥ –°–∞–ø–∞—Å—ã (Pre-commit)

–ë—ñ–∑ –∫–æ–¥ —Å—Ç–∏–ª—ñ–Ω—ñ“£ –±—ñ—Ä–∫–µ–ª–∫—ñ –±–æ–ª—É—ã “Ø—à—ñ–Ω pre-commit (Black, Flake8) “õ–æ–ª–¥–∞–Ω–∞–º—ã–∑.

```bash
# Git hook-—Ç–∞—Ä–¥—ã –æ—Ä–Ω–∞—Ç—É
uv run pre-commit install

# (“ö–æ—Å—ã–º—à–∞) “ö–æ–ª–º–µ–Ω —ñ—Å–∫–µ “õ–æ—Å—É
uv run pre-commit run --all-files
```

### CI/CD –ü–∞–π–ø–ª–∞–π–Ω (GitHub Actions)

–ñ–æ–±–∞–¥–∞ –∞–≤—Ç–æ–º–∞—Ç—Ç–∞–Ω–¥—ã—Ä—ã–ª“ì–∞–Ω –ø–∞–π–ø–ª–∞–π–Ω (.github/workflows/deploy.yml) –±–∞—Ä. –û–ª push –∂–∞—Å–∞“ì–∞–Ω–¥–∞ dev –æ—Ä—Ç–∞—Å—ã–Ω–∞, –∞–ª “õ–æ–ª–º–µ–Ω “õ–æ—Å“õ–∞–Ω–¥–∞ prod –æ—Ä—Ç–∞—Å—ã–Ω–∞ –¥–µ–ø–ª–æ–π –∂–∞—Å–∞–π–¥—ã.

### “ö–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫: Access Key “ö–∞–∂–µ—Ç –ï–º–µ—Å!

–ë—ñ–∑ “õ“±–ø–∏—è —Å”©–∑—Å—ñ–∑ “õ–∞—É—ñ–ø—Å—ñ–∑ –¥–µ–ø–ª–æ–π “Ø—à—ñ–Ω AWS OIDC (OpenID Connect) “õ–æ–ª–¥–∞–Ω–∞–º—ã–∑.

–ë–∞–ø—Ç–∞—É —Å–∫—Ä–∏–ø—Ç—ñ–Ω —ñ—Å–∫–µ “õ–æ—Å—ã“£—ã–∑:

```bash
# –°–∫—Ä–∏–ø—Ç—ñ “õ–æ—Å—É“ì–∞ “õ–∞–∂–µ—Ç—Ç—ñ —Ä“±“õ—Å–∞—Ç—ã–Ω –±–µ—Ä—É
chmod +x scripts/setup_oidc.sh

# “ö–æ–ª–¥–∞–Ω—ã–ª—É—ã: ./scripts/setup_oidc.sh <github_user>/<repo_name>
./scripts/setup_oidc.sh yourname/serverless-tg-bot-starter
```

**GitHub-“õ–∞ “õ“±–ø–∏—è –∫—ñ–ª—Ç—Ç–µ—Ä–¥—ñ “õ–æ—Å—É:** –°–∫—Ä–∏–ø—Ç —à—ã“ì–∞—Ä“ì–∞–Ω `AWS_ROLE_ARN` –º”ô–Ω—ñ–Ω –∫”©—à—ñ—Ä—ñ–ø, –ë–æ—Ç —Ç–æ–∫–µ–Ω–¥–∞—Ä—ã–º–µ–Ω –±—ñ—Ä–≥–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π–¥—ñ“£ Secrets –±”©–ª—ñ–º—ñ–Ω–µ “õ–æ—Å—ã“£—ã–∑.


## üìö “ö“±–∂–∞—Ç—Ç–∞–º–∞

- üìñ **[”ò–∑—ñ—Ä–ª–µ—É—à—ñ –ù“±—Å“õ–∞—É–ª—ã“ì—ã](docs/developer_guide.md)**: : Handler –∂–∞–∑—É, Context –æ–±—ä–µ–∫—Ç—ñ—Å—ñ–Ω “õ–æ–ª–¥–∞–Ω—É.
- üöÄ **[–û—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É –ù“±—Å“õ–∞—É–ª—ã“ì—ã](docs/deployment.md)**: CI/CD –±–∞–ø—Ç–∞—É, OIDC –∂”ô–Ω–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.

## ü§ù –ñ–æ–±–∞“ì–∞ “Æ–ª–µ—Å “ö–æ—Å—É (Contributing)

“Æ–ª–µ—Å “õ–æ—Å—É“ì–∞ “õ—É–∞–Ω—ã—à—Ç—ã–º—ã–∑! Pull Request –∂—ñ–±–µ—Ä–º–µ—Å –±“±—Ä—ã–Ω pre-commit —ñ—Å–∫–µ “õ–æ—Å—É–¥—ã “±–º—ã—Ç–ø–∞“£—ã–∑.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî –±“±–ª —à–∞–±–ª–æ–Ω–¥—ã ”©–∑ –∂–æ–±–∞–ª–∞—Ä—ã“£—ã–∑–¥–∞ –µ—Ä–∫—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã“£—ã–∑!

---

**–û—Ä—Ç–∞–ª—ã“õ –ê–∑–∏—è–¥–∞“ì—ã Serverless-–∫–µ ”©—Ç—ñ–ø –∂–∞—Ç“õ–∞–Ω ”ô–∑—ñ—Ä–ª–µ—É—à—ñ–ª–µ—Ä “Ø—à—ñ–Ω ‚ù§Ô∏è-–ø–µ–Ω –∂–∞—Å–∞–ª“ì–∞–Ω**
